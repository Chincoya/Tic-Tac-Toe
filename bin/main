#!/usr/bin/env ruby
require './lib/logic.rb'

class TicTacInterface
  def initialize()
    @engine = TicTacLogic.new
    begin
      puts `clear`
      p "What's your name, player 1?"
      @engine.player1 = gets.chomp
      puts `clear`
      p "What's your name, player 2?"
      @engine.player2 = gets.chomp
      puts `clear`
    # rescue StandardError => e
    #   p "No name given"
    #   sleep 1
    #   retry
    end
  end

  def game
    paint
    while @engine.play
      p "#{ @engine.playert ? @engine.player1 : @engine.player2 }, make a move"
      @engine.move(gets.chomp.to_i)
      paint
      p @engine.game_end?
    end
  end

  private

  def paint()
    puts `clear`
    p "||||||||||||||||||||||"
    3.times do |x|
      p "        #{@board[(3*x)]} #{@board[(3*x)+1]} #{@board[(3*x)+2]}"
    end
    p "||||||||||||||||||||||"
  end
end

main = TicTacInterface.new
main.game
